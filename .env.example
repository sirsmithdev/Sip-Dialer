# =============================================================================
# SIP Auto-Dialer Environment Configuration
# =============================================================================
# Copy this file to .env and configure your settings
#
# WINDOWS DEPLOYMENT:
#   1. Copy this file: copy .env.example .env
#   2. Edit .env with your settings
#   3. Run: deploy-windows.bat init
#
# See DEPLOYMENT.md for full instructions.
# =============================================================================

# =============================================================================
# DATABASE
# =============================================================================
POSTGRES_USER=autodialer
POSTGRES_PASSWORD=autodialer_secret
POSTGRES_DB=autodialer
# Docker internal URL (don't change unless you know what you're doing)
DATABASE_URL=postgresql+asyncpg://autodialer:autodialer_secret@postgresql:5432/autodialer

# =============================================================================
# REDIS
# =============================================================================
# Docker internal URL (don't change unless you know what you're doing)
REDIS_URL=redis://redis:6379/0

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
# IMPORTANT: Change this in production!
# Generate with PowerShell: [Convert]::ToBase64String((1..32|%{Get-Random -Max 256}))
# Or Python: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=change-me-in-production-use-a-strong-random-string
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# INITIAL ADMIN USER
# =============================================================================
# These credentials are used to create the first admin user on initialization
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=changeme123

# =============================================================================
# MINIO (S3-Compatible Storage)
# =============================================================================
# IMPORTANT: Change these in production!
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_AUDIO=audio-files
MINIO_BUCKET_RECORDINGS=call-recordings
# MinIO endpoint (Docker internal)
MINIO_ENDPOINT=minio:9000

# =============================================================================
# GRANDSTREAM UCM6302 - PJSIP EXTENSION SETTINGS
# =============================================================================
# The application connects directly as a PJSIP extension to the UCM6302.
# Configure these settings in the UI (Settings > SIP Settings).
# Below are default values for reference:
#
# SIP_SERVER=192.168.1.100          # Your UCM6302 IP address
# SIP_PORT=5060                     # SIP signaling port
# SIP_USERNAME=your_extension       # PJSIP extension number
# SIP_PASSWORD=extension_password   # PJSIP extension password
# SIP_TRANSPORT=UDP                 # UDP, TCP, or TLS

# Local SIP port for the dialer engine (avoid conflict with UCM)
LOCAL_SIP_PORT=5061

# =============================================================================
# RTP SETTINGS (Media Ports)
# =============================================================================
RTP_PORT_START=10000
RTP_PORT_END=10100

# =============================================================================
# FASTAGI SERVER
# =============================================================================
AGI_HOST=0.0.0.0
AGI_PORT=4573

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME=SIP Auto-Dialer
# Change to 'production' for production deployment
APP_ENV=development
# Set to false in production
DEBUG=true
# Options: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# =============================================================================
# CORS SETTINGS
# =============================================================================
# Add your server hostname/IP for production
# Example: http://localhost,http://localhost:3000,http://myserver.company.local:3000
CORS_ORIGINS=http://localhost,http://localhost:3000,http://localhost:80

# =============================================================================
# ENCRYPTION KEY (for sensitive data like passwords)
# =============================================================================
# Generate a Fernet key with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your-fernet-key-here-base64-encoded

# =============================================================================
# CELERY SETTINGS
# =============================================================================
# Broker and result backend (using Redis)
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# =============================================================================
# FLOWER (Celery Monitor) SETTINGS
# =============================================================================
# Optional: Enable basic auth for Flower in production
# FLOWER_BASIC_AUTH=admin:password

# =============================================================================
# WINDOWS-SPECIFIC NOTES
# =============================================================================
# 1. Docker Desktop for Windows must be running
# 2. Use the UCM6302's IP address for SIP_SERVER in the UI
# 3. Ensure Windows Firewall allows Docker traffic on ports:
#    - 5061/UDP (SIP signaling)
#    - 10000-10100/UDP (RTP media)
# 4. For WSL 2 backend, network performance is better
# 5. See DEPLOYMENT.md for detailed Windows setup instructions
