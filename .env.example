# =============================================================================
# SIP Auto-Dialer Environment Configuration
# =============================================================================
# Copy this file to .env and configure your settings
#
# WINDOWS DEPLOYMENT:
#   1. Copy this file: copy .env.example .env
#   2. Edit .env with your settings
#   3. Run: deploy-windows.bat init
#
# See DEPLOYMENT.md for full instructions.
# =============================================================================

# =============================================================================
# DATABASE
# =============================================================================
POSTGRES_USER=autodialer
POSTGRES_PASSWORD=autodialer_secret
POSTGRES_DB=autodialer
# Docker internal URL (don't change unless you know what you're doing)
DATABASE_URL=postgresql+asyncpg://autodialer:autodialer_secret@postgresql:5432/autodialer

# =============================================================================
# REDIS
# =============================================================================
# Docker internal URL (don't change unless you know what you're doing)
REDIS_URL=redis://redis:6379/0

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
# IMPORTANT: Change this in production!
# Generate with PowerShell: [Convert]::ToBase64String((1..32|%{Get-Random -Max 256}))
# Or Python: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=change-me-in-production-use-a-strong-random-string
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# INITIAL ADMIN USER
# =============================================================================
# These credentials are used to create the first admin user on initialization
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=changeme123

# =============================================================================
# MINIO (S3-Compatible Storage)
# =============================================================================
# IMPORTANT: Change these in production!
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_AUDIO=audio-files
MINIO_BUCKET_RECORDINGS=call-recordings
# MinIO endpoint (Docker internal)
MINIO_ENDPOINT=minio:9000

# =============================================================================
# GRANDSTREAM UCM6302 / ASTERISK - AMI SETTINGS
# =============================================================================
# Your PBX/Asterisk server IP address (reachable from Docker network)
# For Windows, use your network IP, not localhost
AMI_HOST=192.168.1.100
AMI_PORT=5038
AMI_USERNAME=autodialer_ami
AMI_PASSWORD=your_ami_password_here

# =============================================================================
# GRANDSTREAM UCM6302 - SIP SETTINGS (Default values, configurable in UI)
# =============================================================================
# Your PBX/SIP server IP address
SIP_SERVER=192.168.1.100
SIP_PORT=5060
SIP_USERNAME=autodialer
SIP_PASSWORD=your_sip_password_here
SIP_TRANSPORT=UDP
SIP_REGISTRATION_REQUIRED=true
SIP_KEEPALIVE_INTERVAL=30

# =============================================================================
# RTP SETTINGS
# =============================================================================
RTP_PORT_START=10000
RTP_PORT_END=20000

# =============================================================================
# FASTAGI SERVER
# =============================================================================
AGI_HOST=0.0.0.0
AGI_PORT=4573

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME=SIP Auto-Dialer
# Change to 'production' for production deployment
APP_ENV=development
# Set to false in production
DEBUG=true
# Options: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# =============================================================================
# CORS SETTINGS
# =============================================================================
# Add your server hostname/IP for production
# Example: http://localhost,http://localhost:3000,http://myserver.company.local:3000
CORS_ORIGINS=http://localhost,http://localhost:3000,http://localhost:80

# =============================================================================
# ENCRYPTION KEY (for sensitive data like passwords)
# =============================================================================
# Generate a Fernet key with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your-fernet-key-here-base64-encoded

# =============================================================================
# CELERY SETTINGS
# =============================================================================
# Broker and result backend (using Redis)
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# =============================================================================
# FLOWER (Celery Monitor) SETTINGS
# =============================================================================
# Optional: Enable basic auth for Flower in production
# FLOWER_BASIC_AUTH=admin:password

# =============================================================================
# WINDOWS-SPECIFIC NOTES
# =============================================================================
# 1. Docker Desktop for Windows must be running
# 2. Use IP addresses instead of hostnames for AMI_HOST/SIP_SERVER
# 3. Ensure Windows Firewall allows Docker traffic
# 4. For WSL 2 backend, network performance is better
# 5. See DEPLOYMENT.md for detailed Windows setup instructions
